//
//  UIViewFMPlayer.m
//  ChinaBrowser
//
//  Created by David on 14/11/19.
//  Copyright (c) 2014å¹´ KOTO Inc. All rights reserved.
//

#import "UIViewFMPlayer.h"

@interface UIViewFMPlayer ()
{
    IBOutlet UIImageView *_imageViewBgPlayer;
    IBOutlet UIView *_viewContentPlayer;
    IBOutlet UIImageView *_imageViewWave;
    IBOutlet UIButton *_btnAdd;
    
    IBOutlet UILabel *_labelFM;
    IBOutlet UILabel *_labelTitle;
    IBOutlet UILabel *_labelNextTitle;
    IBOutlet UILabel *_labelTime;
    IBOutlet UIButton *_btnPlayPause;
}

@end

@implementation UIViewFMPlayer

+ (instancetype)viewFromXib
{
    return [[NSBundle mainBundle] loadNibNamed:NSStringFromClass([self class]) owner:nil options:nil][0];
}

- (void)awakeFromNib
{
    [super awakeFromNib];
    
    _imageViewBgPlayer.image = [UIImage imageWithBundleFile:@"iPhone/FM/bg_player.png"];
    _imageViewWave.image = [UIImage imageWithBundleFile:@"iPhone/FM/list_0.png"];
    
    [_btnAdd setImage:[UIImage imageWithBundleFile:@"iPhone/FM/add_0.png"] forState:UIControlStateNormal];
    [_btnAdd setImage:[UIImage imageWithBundleFile:@"iPhone/FM/add_1.png"] forState:UIControlStateHighlighted];
    
    [_btnPlayPause setImage:[UIImage imageWithBundleFile:@"iPhone/FM/play_0.png"] forState:UIControlStateNormal];
    [_btnPlayPause setImage:[UIImage imageWithBundleFile:@"iPhone/FM/play_1.png"] forState:UIControlStateHighlighted];
    
    dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(0 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^{
        [_labelFM setBgImageWithStretchImage:[[UIImage imageWithBundleFile:@"iPhone/FM/bg_fm_0.png"] stretchableImageWithLeftCapWidth:14 topCapHeight:10]];
    });
    
    _viewContentPlayer.backgroundColor = [UIColor colorWithWhite:0 alpha:0];
    CAShapeLayer *mask = [CAShapeLayer layer];
    mask.frame = _viewContentPlayer.bounds;
    mask.path = [UIBezierPath bezierPathWithRoundedRect:_viewContentPlayer.bounds cornerRadius:MIN(_viewContentPlayer.width, _viewContentPlayer.height)/2].CGPath;
    _viewContentPlayer.layer.mask = mask;
}

@end
